

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage Tutorial &mdash; CoHAN2.0  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=40d87414" />

  
    <link rel="canonical" href="https://laas-hri.github.io/CoHAN2.0_docs/tutorial.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Mode Switching and Behavior Trees" href="mode_switching.html" />
    <link rel="prev" title="Install" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CoHAN2.0
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="home.html">CoHAN2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuring-costmaps">Configuring Costmaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-move-base-and-hateblocalplanner">Configuring move_base and HATEBLocalPlanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="#required-topics">Required Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#launch-file-for-visible-and-invisible-agents-in-cohan2-0">Launch file for Visible and Invisible Agents in CoHAN2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#launch-file-for-move-base-node-with-cohan2-0">Launch file for move_base node with CoHAN2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#putting-everything-together-using-a-simulated-robot">Putting everything together (using a simulated robot)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-cohan2-0-on-the-simulated-robot">Run CoHAN2.0 on the simulated robot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mode_switching.html">Mode Switching and Behavior Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="cohan_sim.html">CoHAN Sim</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/library_root.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="cohan_msgs.html">CoHAN_Msgs</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Version History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CoHAN2.0</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Usage Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage-tutorial">
<h1>Usage Tutorial<a class="headerlink" href="#usage-tutorial" title="Link to this heading"></a></h1>
<section id="configuring-costmaps">
<h2>Configuring Costmaps<a class="headerlink" href="#configuring-costmaps" title="Link to this heading"></a></h2>
<p>Configuring of costmaps is pretty similar to the navigation stack. CoHAN offers two extra layers (Human Static and Visible) that adds more safety and legibility to the robot’s plan. Here is how you add them to the costmap (either local or global):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">plugins</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">human_layer_static</span><span class="p p-Indicator">,</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cohan_layers::StaticAgentLayer&quot;</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">human_layer_visible</span><span class="p p-Indicator">,</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cohan_layers::AgentVisibilityLayer&quot;</span><span class="p p-Indicator">}</span>

<span class="nt">human_layer_static</span><span class="p">:</span>
<span class="w">  </span><span class="nt">robot_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">  </span><span class="nt">agent_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
</pre></div>
</div>
<p>Please edit the robot_radius and agent_radius appropriately. Example YAML files for configuration can be found in <a class="reference external" href="https://github.com/LAAS-HRI/CoHAN2.0/blob/master/src/cohan_tutorial/config/global_costmap_params.yaml">global_costmap_params.yaml</a> and <a class="reference external" href="https://github.com/LAAS-HRI/CoHAN2.0/blob/master/src/cohan_tutorial/config/local_costmap_params.yaml">local_costmap_params.yaml</a>.</p>
</section>
<section id="configuring-move-base-and-hateblocalplanner">
<h2>Configuring move_base and HATEBLocalPlanner<a class="headerlink" href="#configuring-move-base-and-hateblocalplanner" title="Link to this heading"></a></h2>
<p>The optimal settings for the move_base that work with CoHAN are given below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">planner_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="nt">controller_frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="nt">planner_patience</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="nt">controller_patience</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.0</span>
<span class="nt">recovery_behavior_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>You can tweek these a little but make sure that the planner_frequency is always less than controller_frequency as it causes issues with move_base. Make sure recovery_behavior_enabled is set to false to stop move_base from interfering with recovery behaviors in CoHAN.</p>
<p>For HATEB_Local_PLanner, there are several parameters. Here we show some important ones:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1">## Planning Mode</span>
<span class="nt">planning_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"> </span><span class="c1">#(0: robot navigation wuth no human planning. 1: human-aware planning)</span>

<span class="c1">## Robot Params (there are several others as well to set robot model completely -&gt; check example files)</span>
<span class="nt">holonomic_robot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"> </span><span class="c1">#(for a differential drive robot)</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"> </span><span class="c1">#(0: Robot, 1: Human)</span>
<span class="nt">robot_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>

<span class="c1"># Agents (humans) and HATEB</span>
<span class="c1">## Agent Model Params</span>
<span class="nt">agent_radius</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.30</span>
<span class="nt">max_agent_vel_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.3</span>
<span class="nt">max_agent_vel_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="nt">max_agent_vel_x_backwards</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="nt">max_agent_vel_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.1</span>
<span class="nt">agent_acc_lim_x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="nt">agent_acc_lim_y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.3</span>
<span class="nt">agent_acc_lim_theta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span>
<span class="c1">## HATEB Params (activate all constraints and set thresholds (these are defaults for a good performance))</span>
<span class="nt">use_agent_agent_safety_c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">use_agent_robot_safety_c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">use_agent_robot_rel_vel_c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">use_agent_robot_visi_c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">add_invisible_humans</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="nt">min_agent_agent_dist</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="nt">min_agent_robot_dist</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="nt">rel_vel_cost_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.5</span>
<span class="nt">visibility_cost_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.5</span>
<span class="nt">invisible_human_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>

<span class="c1"># Optimization weights (Since it is based on teb, there are lot more parameters -&gt; check example files and teb_local_planner)</span>
<span class="nt">weight_agent_robot_safety</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="nt">weight_agent_agent_safety</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="nt">weight_agent_robot_rel_vel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="nt">weight_agent_robot_visibility</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="nt">weight_invisible_human</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
<p>Look at <a class="reference external" href="https://github.com/LAAS-HRI/CoHAN2.0/blob/master/src/cohan_tutorial/config/move_base_params.yaml">move_base_params.yaml</a> and <a class="reference external" href="https://github.com/LAAS-HRI/CoHAN2.0/blob/master/src/cohan_tutorial/config/hateb_local_planner_params.yaml">hateb_local_params.yaml</a> for full example configuration.</p>
</section>
<section id="required-topics">
<h2>Required Topics<a class="headerlink" href="#required-topics" title="Link to this heading"></a></h2>
<p>We assume that the robot has good <em>tf</em> and well localized in the environment (map). The following topics are required for the system to work properly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">tracked_agents</span>
<span class="o">/</span><span class="n">odom</span>
<span class="o">/</span><span class="n">base_scan</span> <span class="p">(</span><span class="n">laser</span> <span class="n">scan</span> <span class="n">topic</span> <span class="k">for</span> <span class="n">obstacle</span> <span class="n">layer</span><span class="p">)</span>
<span class="o">/</span><span class="n">joint_states</span>
</pre></div>
</div>
<p>The <em>/tracked_agents</em> topic uses a custom message <a class="reference external" href="msg/TrackedAgents.html">TrackedAgents</a>. Other topics are standard ROS topics. An example script publishing <em>tracked_agents</em> topic can be found in <a class="reference external" href="https://github.com/LAAS-HRI/CoHAN2.0/blob/master/src/cohan_tutorial/scripts/agents_bridge.py">agents_bridge.py</a>.</p>
</section>
<section id="launch-file-for-visible-and-invisible-agents-in-cohan2-0">
<h2>Launch file for Visible and Invisible Agents in CoHAN2.0<a class="headerlink" href="#launch-file-for-visible-and-invisible-agents-in-cohan2-0" title="Link to this heading"></a></h2>
<p>Along with the node publishing tracked agents, you need to launch prediction and filter nodes befor you launch move_base node. Add the following to a launch file named agents.launch.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;launch&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;num_agents&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Sim agents to /tracked_agents --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;agents&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;cohan_sim_navigation&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;agents_bridge.py&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(arg num_agents)&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- agent pose prediction, for the local-planning --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;agent_path_prediction&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;agent_path_predict&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;agent_path_predict&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;goals_file&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(find agent_path_prediction)/cfg/goals_adream.yaml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Add the invisible humans detection node --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;invisible_humans_detection&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;invisible_humans_detection_node&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_scanner&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
</section>
<section id="launch-file-for-move-base-node-with-cohan2-0">
<h2>Launch file for move_base node with CoHAN2.0<a class="headerlink" href="#launch-file-for-move-base-node-with-cohan2-0" title="Link to this heading"></a></h2>
<p>We will now load the appropriate parameters and launch the move_base node with HATEBLocalPlanner. The following is an example launch file that does this. You can change the <em>bt_xml</em> argument to load different behavior trees. Add the following to a launch file named move_base_cohan.launch.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;launch&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;node_start_delay&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;4.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bt_xml&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;all_modes.xml&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- move_base node with hateb --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;move_base&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;move_base&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;move_base&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="w"> </span><span class="na">launch-prefix=</span><span class="s">&quot;bash -c &#39;sleep $(arg node_start_delay); $0 $@&#39; &quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_global_planner&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;global_planner/GlobalPlanner&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_local_planner&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;hateb_local_planner/HATebLocalPlannerROS&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;GlobalPlanner/allow_unknown&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bt_xml_path&quot;</span><span class="w">  </span><span class="na">value=</span><span class="s">&quot;$(find hateb_local_planner)/behavior_trees/$(arg bt_xml)&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;use_simulated_fov&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>

<span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find cohan_sim_navigation)/config/move_base_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find cohan_sim_navigation)/config/robot/global_costmap_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;global_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find cohan_sim_navigation)/config/robot/local_costmap_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;local_costmap&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;rosparam</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find cohan_sim_navigation)/config/robot/hateb_local_planner_params.yaml&quot;</span><span class="w"> </span><span class="na">command=</span><span class="s">&quot;load&quot;</span><span class="w"> </span><span class="na">ns=</span><span class="s">&quot;HATebLocalPlannerROS&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
</section>
<section id="putting-everything-together-using-a-simulated-robot">
<h2>Putting everything together (using a simulated robot)<a class="headerlink" href="#putting-everything-together-using-a-simulated-robot" title="Link to this heading"></a></h2>
<p>Here is an example launch file that launches everything together (check <a class="reference external" href="https://github.com/LAAS-HRI/CoHAN2.0/blob/master/src/cohan_tutorial/launch/cohan_simple.launch">cohan_simple.launch</a>):</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;launch&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;node_start_delay&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;4.0&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bt_xml&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;all_modes.xml&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;num_agents&quot;</span><span class="w"> </span><span class="na">default=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Use sim time for simulator --&gt;</span>
<span class="w">    </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;/use_sim_time&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Launch Simulator --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;cohan_sim&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;cohan_sim&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;simros_node&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-g $(find cohan_sim_navigation)/maps/laas.yaml&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- start map_server --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;map_server&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;$(find cohan_sim_navigation)/maps/laas.yaml&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Localize the robot --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;fake_localization&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;fake_localization&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;fake_localization&quot;</span><span class="w"> </span><span class="na">respawn=</span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;global_frame_id&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;map&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Launch agents nodes--&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find cohan_sim_navigation)/launch/agents.launch&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;num_agents&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg num_agents)&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/include&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Launch move_base node with hateb --&gt;</span>
<span class="w">    </span><span class="nt">&lt;include</span><span class="w"> </span><span class="na">file=</span><span class="s">&quot;$(find cohan_sim_navigation)/launch/move_base_cohan.launch&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;bt_xml&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg bt_xml)&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;node_start_delay&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;$(arg node_start_delay)&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;/include&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Start RViZ --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find cohan_sim_navigation)/rviz/cohan_sim.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
</section>
<section id="run-cohan2-0-on-the-simulated-robot">
<h2>Run CoHAN2.0 on the simulated robot<a class="headerlink" href="#run-cohan2-0-on-the-simulated-robot" title="Link to this heading"></a></h2>
<p>Launch simulator and move_base with CoHAN2.0. If you are usinf a Docker, run these inside the container.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>roslaunch<span class="w"> </span>cohan_tutorial<span class="w"> </span>cohan_simple.launch
</pre></div>
</div>
<p>Launch teleop_keyboard to control human.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rosrun<span class="w"> </span>teleop_twist_keyboard<span class="w"> </span>teleop_twist_keyboard.py<span class="w"> </span>cmd_vel:<span class="o">=</span>/human1/cmd_vel
</pre></div>
</div>
<p>Give a goal to the robot and move the human using the teleop_keyboard. If everything went well you should be able to see this!</p>
<a class="reference internal image-reference" href="_images/tutorial.gif"><img alt="CoHAN diagram" class="align-center" src="_images/tutorial.gif" style="width: 95%;" />
</a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mode_switching.html" class="btn btn-neutral float-right" title="Mode Switching and Behavior Trees" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Phani Teja Singamaneni.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>